import os
import sys
from pathlib import Path
from typing import Any, TypedDict

import numpy as np
import pandas as pd
import plotly.express as px
import plotly.graph_objects as go
import streamlit as st

from titanicprediction.core.services import ServiceFactory, TrainingConfig
from titanicprediction.data.analysis import EDAVisualizer
from titanicprediction.data.preprocessing import PreprocessorFactory
from titanicprediction.data.repositories import CSVDataRepository
from titanicprediction.entities.core import Dataset, Passenger, TrainedModel

sys.path.append(os.path.dirname(os.path.abspath(__file__)))


class AppState(TypedDict):
    current_page: str
    dataset: Dataset | None
    trained_model: TrainedModel | None
    preprocessing_pipeline: Any | None
    current_predictions: list[Any]
    training_history: list[float]
    training_result: Any | None


class DataTableComponent:
    def render(
        self, data: pd.DataFrame, title: str = "–¢–∞–±–ª–∏—Ü–∞ –¥–∞–Ω–Ω—ã—Ö", page_size: int = 10
    ) -> None:
        st.subheader(title)

        col1, col2 = st.columns([2, 1])

        with col1:
            search_term = st.text_input("–ü–æ–∏—Å–∫...", key=f"search_{title}")

        with col2:
            sort_column = st.selectbox("–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞", data.columns, key=f"sort_{title}")

        if search_term:
            filtered_data = data[
                data.astype(str).apply(
                    lambda x: x.str.contains(search_term, case=False).any(), axis=1
                )
            ]
        else:
            filtered_data = data

        if sort_column in filtered_data.columns:
            filtered_data = filtered_data.sort_values(by=sort_column)

        st.dataframe(filtered_data, width="stretch")

        total_pages = max(1, len(filtered_data) // page_size)
        current_page = st.number_input(
            "–°—Ç—Ä–∞–Ω–∏—Ü–∞", min_value=1, max_value=total_pages, value=1, key=f"page_{title}"
        )

        start_idx = (current_page - 1) * page_size
        end_idx = start_idx + page_size

        st.write(
            f"–ü–æ–∫–∞–∑–∞–Ω—ã —Å—Ç—Ä–æ–∫–∏ —Å {start_idx + 1} –¥–æ {min(end_idx, len(filtered_data))} –∏–∑ {len(filtered_data)}"
        )

        if st.button("–≠–∫—Å–ø–æ—Ä—Ç –≤ CSV", key=f"export_{title}"):
            csv = filtered_data.to_csv(index=False)
            st.download_button(
                label="–°–∫–∞—á–∞—Ç—å CSV",
                data=csv,
                file_name="titanic_data.csv",
                mime="text/csv",
            )


class PlotComponent:
    def render(self, plot_path: Path, title: str = "–ì—Ä–∞—Ñ–∏–∫") -> None:
        st.subheader(title)

        try:
            st.image(str(plot_path), width="stretch")
        except Exception as e:
            st.error(f"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≥—Ä–∞—Ñ–∏–∫–∞: {e}")

        col1, col2 = st.columns(2)

        with col1:
            if st.button("–û–±–Ω–æ–≤–∏—Ç—å", key=f"refresh_{title}"):
                st.rerun()

        with col2:
            download_key = f"download_{title}_{hash(plot_path)}"

            try:
                with open(plot_path, "rb") as file:
                    file_data = file.read()
                    st.download_button(
                        label="–°–∫–∞—á–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ",
                        data=file_data,
                        file_name=plot_path.name,
                        mime="image/png",
                        key=download_key,
                    )
            except Exception as e:
                st.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ —Ñ–∞–π–ª–∞ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è: {e}")


class ModelMetricsComponent:
    def render(self, metrics: dict[str, float], confusion_matrix: np.ndarray) -> None:
        st.subheader("–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏")

        col1, col2, col3, col4 = st.columns(4)

        with col1:
            st.metric("Accuracy / –¢–æ—á–Ω–æ—Å—Ç—å", f"{metrics.get('accuracy', 0):.3f}")

        with col2:
            st.metric(
                "Precision / –¢–æ—á–Ω–æ—Å—Ç—å –≤–µ—Ä–Ω–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö",
                f"{metrics.get('precision', 0):.3f}",
            )

        with col3:
            st.metric("Recall / –ü–æ–ª–Ω–æ—Ç–∞", f"{metrics.get('recall', 0):.3f}")

        with col4:
            st.metric("F1-Score / F1-–º–µ—Ä–∞", f"{metrics.get('f1_score', 0):.3f}")

        st.subheader("–ú–∞—Ç—Ä–∏—Ü–∞ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–µ–π")
        self._render_confusion_matrix(confusion_matrix)

        st.subheader("–ü–æ–¥—Ä–æ–±–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏")
        self._render_detailed_metrics(metrics)

    def _render_confusion_matrix(self, cm: np.ndarray) -> None:
        fig = px.imshow(
            cm,
            labels={"x": "–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–æ", "y": "–ê–∫—Ç—É–∞–ª—å–Ω–æ", "color": "–ß–∏—Å–ª–æ"},
            x=["–ù–µ –≤—ã–∂–∏–ª–æ", "–í—ã–∂–∏–ª–æ"],
            y=["–ù–µ –≤—ã–∂–∏–ª–æ", "–í—ã–∂–∏–ª–æ"],
            color_continuous_scale="Blues",
            aspect="auto",
        )

        for i in range(len(cm)):
            for j in range(len(cm)):
                fig.add_annotation(
                    x=j,
                    y=i,
                    text=str(cm[i, j]),
                    showarrow=False,
                    font={"color": "red" if cm[i, j] > cm.max() / 2 else "black"},
                )

        st.plotly_chart(fig, width="stretch")

    def _render_detailed_metrics(self, metrics: dict[str, float]) -> None:
        detailed_metrics = {
            "–ú–µ—Ç—Ä–∏–∫–∏": ["Accuracy", "Precision", "Recall", "F1-Score", "Support"],
            "–ó–Ω–∞—á–µ–Ω–∏–µ": [
                metrics.get("accuracy", 0),
                metrics.get("precision", 0),
                metrics.get("recall", 0),
                metrics.get("f1_score", 0),
                metrics.get("support", 0),
            ],
        }

        st.dataframe(detailed_metrics, width="stretch")


class PredictionFormComponent:
    def render(self) -> Passenger:
        st.subheader("–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Å—Å–∞–∂–∏—Ä–∞—Ö")

        with st.form("prediction_form"):
            col1, col2 = st.columns(2)

            with col1:
                pclass = st.selectbox("–ö–ª–∞—Å—Å –ø–∞—Å—Å–∞–∂–∏—Ä–∞", [1, 2, 3], index=0)
                sex = st.selectbox("–ü–æ–ª", ["male", "female"], index=0)
                age = st.slider("–í–æ–∑—Ä–∞—Å—Ç", 0.0, 100.0, 30.0, 0.5)

            with col2:
                sibsp = st.number_input(
                    "–ë—Ä–∞—Ç—å—è –∏ —Å–µ—Å—Ç—Ä—ã/–°—É–ø—Ä—É–≥–∏", min_value=0, max_value=10, value=0
                )
                parch = st.number_input(
                    "–†–æ–¥–∏—Ç–µ–ª–∏/–î–µ—Ç–∏", min_value=0, max_value=10, value=0
                )
                fare = st.number_input(
                    "–ü–ª–∞—Ç–∞", min_value=0.0, max_value=600.0, value=50.0, step=1.0
                )

            embarked = st.selectbox("–ü–æ—Ä—Ç –ø–æ—Å–∞–¥–∫–∏", ["C", "Q", "S"], index=2)

            submitted = st.form_submit_button("–ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å —à–∞–Ω—Å –≤—ã–∂–∏–≤–∞–Ω–∏—è")

            if submitted:
                return Passenger(
                    passenger_id=0,
                    pclass=pclass,
                    name="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",
                    sex=sex,
                    age=age,
                    sibsp=sibsp,
                    parch=parch,
                    ticket="–ë–∏–ª–µ—Ç",
                    fare=fare,
                    cabin=None,
                    embarked=embarked,
                    survived=None,
                    title=None,
                )

        return None


class DocumentationPage:
    def render(self, state: AppState) -> None:
        st.title("üìö –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è")
        st.markdown("---")

        tab1, tab2, tab3, tab4, tab5 = st.tabs(
            [
                "–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å",
                "–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å",
                "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –≤—ã–≤–æ–¥—ã",
                "–ò—Å—Ç–æ—á–Ω–∏–∫–∏",
                "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è",
            ]
        )

        with tab1:
            self._render_theoretical_part()

        with tab2:
            self._render_practical_part()

        with tab3:
            self._render_results_conclusions()

        with tab4:
            self._render_sources()

        with tab5:
            self._render_technical_documentation()

    def _render_theoretical_part(self):
        st.header("3. –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å")

        st.subheader("3.1 –ß—Ç–æ —Ç–∞–∫–æ–µ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ?")
        st.markdown(
            """
        –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º —á–µ—Ç–∫–æ–≥–æ –∏ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞,
        –ø—Ä–µ–¥–ø–∏—Å—ã–≤–∞—é—â–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä—É —Ç–æ—á–Ω—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏. –û–¥–Ω–∞–∫–æ –¥–ª—è –º–Ω–æ–≥–∏—Ö
        –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á, —Ç–∞–∫–∏—Ö –∫–∞–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤ –∏–ª–∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å–æ–∑–¥–∞–Ω–∏–µ –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–µ–≥–æ
        –Ω–∞–±–æ—Ä–∞ –ø—Ä–∞–≤–∏–ª –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —á—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ —Å–ª–æ–∂–Ω—ã–º –∏–ª–∏ –≤–æ–≤—Å–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–º.

        **–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ** –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ –∏–Ω–æ–π –ø–æ–¥—Ö–æ–¥. –í –µ–≥–æ –æ—Å–Ω–æ–≤–µ –ª–µ–∂–∏—Ç –∏–¥–µ—è –æ —Ç–æ–º, —á—Ç–æ
        –∫–æ–º–ø—å—é—Ç–µ—Ä –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –≥–æ—Ç–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π, –∞ –æ–±—É—á–∞–µ—Ç—Å—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–∏ –∏
        –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è –ø—É—Ç–µ–º –∞–Ω–∞–ª–∏–∑–∞ –±–æ–ª—å—à–æ–≥–æ –æ–±—ä–µ–º–∞ —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
        """
        )

        st.subheader("3.2 –¢–∏–ø—ã –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è")
        st.markdown(
            """
        –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ —Å–ø–æ—Å–æ–±–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥–µ–ª–∏ —Å–æ —Å—Ä–µ–¥–æ–π –º–∞—à–∏–Ω–Ω–æ–µ
        –æ–±—É—á–µ–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç–æ –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤:

        #### 1. –û–±—É—á–µ–Ω–∏–µ —Å —É—á–∏—Ç–µ–ª–µ–º (Supervised Learning)
        - –ú–æ–¥–µ–ª—å –æ–±—É—á–∞–µ—Ç—Å—è –Ω–∞ —Ä–∞–∑–º–µ—á–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        - –ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Ö–æ–¥–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –º–µ—Ç–∫—É
        - –ó–∞–¥–∞—á–∞: –≤—ã—è–≤–∏—Ç—å –≤–∑–∞–∏–º–æ—Å–≤—è–∑—å –º–µ–∂–¥—É –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ –∏ —Ü–µ–ª–µ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
        - **–ü—Ä–∏–º–µ—Ä**: –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –≤—ã–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏ –Ω–∞ –¢–∏—Ç–∞–Ω–∏–∫–µ

        #### 2. –û–±—É—á–µ–Ω–∏–µ –±–µ–∑ —É—á–∏—Ç–µ–ª—è (Unsupervised Learning)
        - –ú–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –±–µ–∑ –º–µ—Ç–æ–∫
        - –ó–∞–¥–∞—á–∞: –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å —Å–∫—Ä—ã—Ç—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–∏
        - **–ü—Ä–∏–º–µ—Ä—ã**: –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è, –ø–æ–Ω–∏–∂–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç–∏

        #### 3. –û–±—É—á–µ–Ω–∏–µ —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º (Reinforcement Learning)
        - –ú–æ–¥–µ–ª—å –æ–±—É—á–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å–æ —Å—Ä–µ–¥–æ–π
        - –ü–æ–ª—É—á–∞–µ—Ç –Ω–∞–≥—Ä–∞–¥—É –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
        - **–ü—Ä–∏–º–µ—Ä—ã**: –ò–≥—Ä–æ–≤—ã–µ –ò–ò, —Ä–æ–±–æ—Ç–æ—Ç–µ—Ö–Ω–∏–∫–∞
        """
        )

        st.subheader("3.3 –ó–∞–¥–∞—á–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è")
        st.markdown(
            """
        **–ó–∞–¥–∞—á–∞ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏** - –æ–¥–Ω–∞ –∏–∑ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –≤ –æ–±–ª–∞—Å—Ç–∏ –æ–±—É—á–µ–Ω–∏—è —Å —É—á–∏—Ç–µ–ª–µ–º.
        –ï—ë —Å—É—Ç—å –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º –æ—Ç–Ω–µ—Å–µ–Ω–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤ –∫ –æ–¥–Ω–æ–º—É –∏–∑ –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–¥–∞–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤
        –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∏—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤.

        **–õ–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è** - –∞–ª–≥–æ—Ä–∏—Ç–º –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è —Ä–µ—à–µ–Ω–∏—è
        –∑–∞–¥–∞—á –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ, —è–≤–ª—è–µ—Ç—Å—è –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏, –∞ –Ω–µ —Ä–µ–≥—Ä–µ—Å—Å–∏–∏.

        #### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è:
        1. **–õ–∏–Ω–µ–π–Ω–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è**: –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –≤–∑–≤–µ—à–µ–Ω–Ω–∞—è —Å—É–º–º–∞ –≤—Ö–æ–¥–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
        2. **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–∞—è —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è (—Å–∏–≥–º–æ–∏–¥–∞) –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å
        3. **–ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è**: –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å –ø–æ—Ä–æ–≥–æ–≤—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º (–æ–±—ã—á–Ω–æ 0.5)

        **–°–∏–≥–º–æ–∏–¥–∞** - –≥–ª–∞–¥–∫–∞—è –º–æ–Ω–æ—Ç–æ–Ω–Ω–∞—è –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–∞—è –Ω–µ–ª–∏–Ω–µ–π–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∏–º–µ—é—â–∞—è —Ñ–æ—Ä–º—É –±—É–∫–≤—ã ¬´S¬ª.
        –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤–∏–¥: f(x) = 1 / (1 + e^-x)
        """
        )

        st.subheader("3.4 –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–Ω–æ–≤—ã: –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è –∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Å–ø—É—Å–∫")
        st.markdown(
            """
        **–ü—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è** - –æ–¥–Ω–æ –∏–∑ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –ø–æ–Ω—è—Ç–∏–π –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.
        –•–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –≤ –¥–∞–Ω–Ω–æ–π —Ç–æ—á–∫–µ.

        **–ì—Ä–∞–¥–∏–µ–Ω—Ç** - –≤–µ–∫—Ç–æ—Ä, —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –∏–∑ —á–∞—Å—Ç–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ –≤—Å–µ–º –µ—ë –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º.
        –£–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–∏—Å–∫–æ—Ä–µ–π—à–µ–≥–æ —Ä–æ—Å—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏.

        **–ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Å–ø—É—Å–∫** - –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º —á–∏—Å–ª–µ–Ω–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –¥–ª—è
        –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –º–∏–Ω–∏–º—É–º–∞ —Ñ—É–Ω–∫—Ü–∏–∏.

        #### –ê–ª–≥–æ—Ä–∏—Ç–º –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω–æ–≥–æ —Å–ø—É—Å–∫–∞:
        1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
        2. **–ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –≥—Ä–∞–¥–∏–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Ç–µ—Ä—å
        3. **–ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**: –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏, –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç—É

        **–°–∫–æ—Ä–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è** - –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π —Ä–∞–∑–º–µ—Ä —à–∞–≥–∞ –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏.
        """
        )

        st.subheader("3.5 –≠—Ç–∞–ø—ã —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ Data Science –ø—Ä–æ–µ–∫—Ç–æ–º")
        st.markdown(
            """
        –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª Data Science –ø—Ä–æ–µ–∫—Ç–∞ –≤–∫–ª—é—á–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã:

        1. **–§–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–µ–ª–∏ –∏ —Ç–∏–ø–∞ –∑–∞–¥–∞—á–∏
        2. **–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö**: –ü–æ–∏—Å–∫ –∏ —Å–±–æ—Ä —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        3. **–ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: –û—á–∏—Å—Ç–∫–∞ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
        4. **–†–∞–∑–≤–µ–¥–æ—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑**: –ò–∑—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –≤—ã—è–≤–ª–µ–Ω–∏–µ –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–µ–π
        5. **–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏**: –í—ã–±–æ—Ä –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤
        6. **–û—Ü–µ–Ω–∫–∞ –º–æ–¥–µ–ª–∏**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        7. **–í–Ω–µ–¥—Ä–µ–Ω–∏–µ**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ –≤ —Ä–∞–±–æ—á—É—é —Å—Ä–µ–¥—É
        8. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏
        """
        )

    def _render_practical_part(self):
        st.header("4. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å")

        st.subheader("4.1 –í—ã–±–æ—Ä –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö")
        st.markdown(
            """
        –î–ª—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –±—ã–ª –≤—ã–±—Ä–∞–Ω –æ—Ç–∫—Ä—ã—Ç—ã–π –¥–∞—Ç–∞—Å–µ—Ç ¬´Titanic Survival Prediction Dataset¬ª.

        #### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞:
        - **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏ —Ä–µ–ø—É—Ç–∞—Ü–∏—è**: –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –¥–∞—Ç–∞—Å–µ—Ç –≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–µ Data Science
        - **–°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –∑–∞–¥–∞—á–µ**: –°–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–∑–Ω–∞–∫–∏ –∏ —Ü–µ–ª–µ–≤—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª—è –±–∏–Ω–∞—Ä–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
        - **–ò–Ω—Ç—É–∏—Ç–∏–≤–Ω–∞—è –ø–æ–Ω—è—Ç–Ω–æ—Å—Ç—å**: –ü—Ä–∏–∑–Ω–∞–∫–∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç —É–∑–∫–æ—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∑–Ω–∞–Ω–∏–π
        - **–ù–∞–ª–∏—á–∏–µ –≤—ã–∑–æ–≤–æ–≤**: –°–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∏

        #### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:
        - **PassengerId**: –ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä –∑–∞–ø–∏—Å–∏
        - **Survived**: –¶–µ–ª–µ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è (0 - –Ω–µ –≤—ã–∂–∏–ª, 1 - –≤—ã–∂–∏–ª)
        - **Pclass**: –ö–ª–∞—Å—Å –±–∏–ª–µ—Ç–∞ (1, 2, 3)
        - **Name**: –ò–º—è –ø–∞—Å—Å–∞–∂–∏—Ä–∞
        - **Sex**: –ü–æ–ª
        - **Age**: –í–æ–∑—Ä–∞—Å—Ç
        - **SibSp**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—Ä–∞—Ç—å–µ–≤/—Å–µ—Å—Ç—ë—Ä –∏ —Å—É–ø—Ä—É–≥–æ–≤
        - **Parch**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∏ –¥–µ—Ç–µ–π
        - **Ticket**: –ù–æ–º–µ—Ä –±–∏–ª–µ—Ç–∞
        - **Fare**: –°—Ç–æ–∏–º–æ—Å—Ç—å –±–∏–ª–µ—Ç–∞
        - **Cabin**: –ö–∞—é—Ç–∞
        - **Embarked**: –ü–æ—Ä—Ç –ø–æ—Å–∞–¥–∫–∏
        """
        )

        st.subheader("4.2 –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö")
        st.markdown(
            """
        #### –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:
        - **Age**: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ–¥–∏–∞–Ω–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º (—É—Å—Ç–æ–π—á–∏–≤–æ –∫ –≤—ã–±—Ä–æ—Å–∞–º)
        - **Embarked**: –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º (–º–æ–¥–æ–π)
        - **Cabin**: –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ –∞–Ω–∞–ª–∏–∑–∞ –∏–∑-–∑–∞ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤

        #### –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤:
        - **One-Hot Encoding**: –î–ª—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ "Sex" –∏ "Embarked"
        - –°–æ–∑–¥–∞–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ª–æ–∂–Ω–æ–π –ø–æ—Ä—è–¥–∫–æ–≤–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

        #### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤:
        - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è (Title) –∏–∑ –ø—Ä–∏–∑–Ω–∞–∫–∞ "Name"
        - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–æ–∑—Ä–∞—Å—Ç–µ, —Å–µ–º–µ–π–Ω–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–º —Å—Ç–∞—Ç—É—Å–µ

        #### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤:
        - **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è**: –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ —Å—Ä–µ–¥–Ω–µ–º—É 0 –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—é 1
        - –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω–æ–≥–æ —Å–ø—É—Å–∫–∞
        - –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —Å –±–æ–ª—å—à–∏–º –¥–∏–∞–ø–∞–∑–æ–Ω–æ–º
        """
        )

        st.subheader("4.3 –†–∞–∑–≤–µ–¥–æ—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö")
        st.markdown(
            """
        #### –ê–Ω–∞–ª–∏–∑ —Ü–µ–ª–µ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:
        - –ò–∑—É—á–µ–Ω–∏–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–ª–∞—Å—Å–æ–≤ (–≤—ã–∂–∏–≤—à–∏–µ/–ø–æ–≥–∏–±—à–∏–µ)
        - –í—ã—è–≤–ª–µ–Ω–∏–µ –¥–∏—Å–±–∞–ª–∞–Ω—Å–∞ –∫–ª–∞—Å—Å–æ–≤

        #### –ê–Ω–∞–ª–∏–∑ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π:
        - **–ö–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏**: –°–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–æ–ª–±—á–∞—Ç—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã
        - **–ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏**: Box-plot, –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã, –≥—Ä–∞—Ñ–∏–∫–∏ –ø–ª–æ—Ç–Ω–æ—Å—Ç–∏
        - **–ú–∞—Ç—Ä–∏—Ü–∞ –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π**: –¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞ –ª–∏–Ω–µ–π–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

        #### –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã EDA:
        - –ü–æ–ª —è–≤–ª—è–µ—Ç—Å—è —Å–∏–ª—å–Ω—ã–º –ø—Ä–µ–¥–∏–∫—Ç–æ—Ä–æ–º –≤—ã–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏
        - –°–æ—Ü–∏–∞–ª—å–Ω–æ-—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å —Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω —Å —à–∞–Ω—Å–æ–º –Ω–∞ —Å–ø–∞—Å–µ–Ω–∏–µ
        - –°–µ–º–µ–π–Ω—ã–µ –ø–∞—Å—Å–∞–∂–∏—Ä—ã –∏–º–µ–ª–∏ –æ—Ç–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —ç–≤–∞–∫—É–∞—Ü–∏–∏
        - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–∫—Ç–æ–≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏
        """
        )

        st.subheader("4.4 –û–±—É—á–µ–Ω–∏–µ –∏ –æ—Ü–µ–Ω–∫–∞ –º–æ–¥–µ–ª–∏ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–∏")
        st.markdown(
            """
        #### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:
        - **–û–±—É—á–∞—é—â–∞—è –≤—ã–±–æ—Ä–∫–∞**: 75% –¥–∞–Ω–Ω—ã—Ö
        - **–¢–µ—Å—Ç–æ–≤–∞—è –≤—ã–±–æ—Ä–∫–∞**: 25% –¥–∞–Ω–Ω—ã—Ö
        - **–°—Ç—Ä–∞—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ —Ü–µ–ª–µ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π

        #### –ü—Ä–æ—Ü–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è:
        - **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è**: –ù—É–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤–µ—Å–æ–≤ –∏ —Å–º–µ—â–µ–Ω–∏—è
        - **–ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Å–ø—É—Å–∫ –Ω–∞ –∫–∞–∂–¥–æ–π —ç–ø–æ—Ö–µ
        - **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞**: –ü—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ—Ç–µ—Ä—å –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
        - **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ–±—É—á–µ–Ω–∏—è**: –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Å—Ö–æ–¥–∏–º–æ—Å—Ç—å—é –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å—é

        #### –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞:
        - **Accuracy**: –î–æ–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
        - **–ú–∞—Ç—Ä–∏—Ü–∞ –æ—à–∏–±–æ–∫**: –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
        - **Precision**: –¢–æ—á–Ω–æ—Å—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤
        - **Recall**: –ü–æ–ª–Ω–æ—Ç–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö instances
        - **F1-–º–µ—Ä–∞**: –ì–∞—Ä–º–æ–Ω–∏—á–µ—Å–∫–æ–µ —Å—Ä–µ–¥–Ω–µ–µ precision –∏ recall

        #### –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–æ–±–∞—Å—Ç–Ω–æ—Å—Ç–∏:
        - –í–∞—Ä—å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π
        - –ê–Ω–∞–ª–∏–∑ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –º–µ—Ç—Ä–∏–∫
        - –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
        """
        )

        st.subheader("4.5 –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –º–æ–¥–µ–ª—å—é")
        st.markdown(
            """
        #### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã:
        - **–ú–æ–¥—É–ª—å–Ω—ã–π –ø—Ä–∏–Ω—Ü–∏–ø**: –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ —è–¥—Ä–∞ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        - **–ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –ª–æ–≥–∏–∫–∏**: –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞, –ø—Ä–æ–≥–Ω–æ–∑, –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è
        - **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å

        #### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
        - **–°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã**: –ü–æ–ª—è –≤–≤–æ–¥–∞, –≤—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏, —Å–ª–∞–π–¥–µ—Ä—ã
        - **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ—Ç—ã, —Ç–∏–ø–æ–≤ –∏ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
        - **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –¢–µ –∂–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, —á—Ç–æ –∏ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

        #### –ü—Ä–æ—Ü–µ—Å—Å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è:
        1. –í–≤–æ–¥ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
        2. –ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
        3. –ü—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã–º pipeline
        4. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥–Ω–æ–∑–∞ –º–æ–¥–µ–ª—å—é
        5. –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –±–∏–Ω–∞—Ä–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑ —á–µ—Ä–µ–∑ –ø–æ—Ä–æ–≥–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
        6. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

        #### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
        - **–ò–∑—è—â–Ω–∞—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—è**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏ –Ω–µ—à—Ç–∞—Ç–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö
        - **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö
        - **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**: –ü–æ–Ω—è—Ç–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

        #### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:
        - **–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è
        - **–Æ–∑–∞–±–∏–ª–∏—Ç–∏-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø—É—Ç–∏
        - **–ú–µ—Ö–∞–Ω–∏–∑–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–≥–∞**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏
        """
        )

    def _render_results_conclusions(self):
        st.header("5. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –≤—ã–≤–æ–¥—ã")

        st.subheader("–î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã")
        st.markdown(
            """
        #### –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
        - –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–∏–Ω–∞—Ä–Ω–æ–π –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
        - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ç—â–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
        - –î–æ–∫–∞–∑–∞–Ω–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω–æ–≥–æ —Å–ø—É—Å–∫–∞ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π

        #### –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å:
        - –í—ã—è–≤–ª–µ–Ω—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–∏ –≤ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
        - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ—Ç–æ–¥–æ–≤ ML –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø–æ–¥–æ–±–Ω—ã—Ö –∑–∞–¥–∞—á
        - –°–æ–∑–¥–∞–Ω –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π ML

        #### –ù–∞—É—á–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ:
        - –ò–∑—É—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç —Ä–æ—Å—Å–∏–π—Å–∫–æ–≥–æ —É—á—ë–Ω–æ–≥–æ –î–º–∏—Ç—Ä–∏—è –í–µ—Ç—Ä–æ–≤–∞
        - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –∏ –º–µ—Ç–æ–¥–æ–≤ –æ–±—ä—è—Å–Ω–∏–º–æ–≥–æ –ò–ò
        - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤–∞–∂–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞–Ω–∏–π
        """
        )

        st.subheader("–ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã —Ä–∞–∑–≤–∏—Ç–∏—è")
        st.markdown(
            """
        #### –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞:
        1. **–£–≥–ª—É–±–ª–µ–Ω–∏–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏**:
           - –õ–∏–Ω–µ–π–Ω–∞—è –∞–ª–≥–µ–±—Ä–∞
           - –¢–µ–æ—Ä–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π
           - –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

        2. **–û—Å–≤–æ–µ–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä**:
           - –ì–ª—É–±–æ–∫–æ–µ –æ–±—É—á–µ–Ω–∏–µ
           - –ù–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏
           - –ö–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ
           - –û–±—Ä–∞–±–æ—Ç–∫–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞

        3. **–£—á–∞—Å—Ç–∏–µ –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–µ**:
           - –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã: Kaggle, Habr
           - –ü—É–±–ª–∏–∫–∞—Ü–∏—è –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ç–∞—Ç–µ–π
           - –û–±–º–µ–Ω –∑–Ω–∞–Ω–∏—è–º–∏ —Å —Ä–æ—Å—Å–∏–π—Å–∫–∏–º IT-—Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º

        #### –ö–∞—Ä—å–µ—Ä–Ω—ã–µ –∞–º–±–∏—Ü–∏–∏:
        - –°—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ full-stack —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º –≤ –æ–±–ª–∞—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
        - –°–æ—á–µ—Ç–∞–Ω–∏–µ —ç–∫—Å–ø–µ—Ä—Ç–∏–∑—ã –≤ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ, –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
        - –ü–æ–Ω–∏–º–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        """
        )

        st.subheader("–ó–∞–∫–ª—é—á–µ–Ω–∏–µ")
        st.markdown(
            """
        –î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Å—Ç–∞–ª –≤–∞–∂–Ω—ã–º —ç—Ç–∞–ø–æ–º –≤ –æ—Å–≤–æ–µ–Ω–∏–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è, –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–≤ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å
        —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–Ω–∞—á–∏–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑—É—á–µ–Ω–∏–µ —Ç–µ–æ—Ä–∏–∏ –∏ –µ—ë
        –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫—É—é –∞–ø—Ä–æ–±–∞—Ü–∏—é.

        **–ü—Ä–∏–æ–±—Ä–µ—Ç—ë–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è –∏ –Ω–∞–≤—ã–∫–∏** —Å–æ–∑–¥–∞—é—Ç –ø—Ä–æ—á–Ω—É—é –æ—Å–Ω–æ–≤—É –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ
        —Ä–∞–∑–≤–∏—Ç–∏—è –≤ –æ–¥–Ω–æ–π –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã—Ö –∏ –±—ã—Å—Ç—Ä–æ—Ä–∞–∑–≤–∏–≤–∞—é—â–∏—Ö—Å—è –æ–±–ª–∞—Å—Ç–µ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∏.

        –í—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:
        [GitHub](https://github.com/alexeev-prog/ML-DS_learning_article)
        """
        )

    def _render_sources(self):
        st.header("–ò—Å—Ç–æ—á–Ω–∏–∫–∏")

        st.subheader("–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞")
        sources = [
            {
                "title": "–ì—Ä–æ–∫–∞–µ–º –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ",
                "author": "–°–µ—Ä—Ä–∞–Ω–æ, –õ.",
                "publisher": "–ü–∏—Ç–µ—Ä, 2022",
                "pages": "480 —Å.",
            },
            {
                "title": "–ì—Ä–æ–∫–∞–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º—ã. –ò–ª–ª—é—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ—Å–æ–±–∏–µ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤ –∏ –ª—é–±–æ–ø—ã—Ç—Å—Ç–≤—É—é—â–∏—Ö",
                "author": "–ë—Ö–∞—Ä–≥–∞–≤–∞, –ê.",
                "publisher": "–ü–∏—Ç–µ—Ä, 2024",
                "pages": "290 —Å.",
            },
            {
                "title": "–ì—Ä–æ–∫–∞–µ–º –≥–ª—É–±–æ–∫–æ–µ –æ–±—É—á–µ–Ω–∏–µ",
                "author": "–¢—Ä–∞—Å–∫, –≠.",
                "publisher": "–ü–∏—Ç–µ—Ä, 2023",
                "pages": "304 —Å.",
            },
            {
                "title": "–ì—Ä–æ–∫–∞–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º—ã",
                "author": "–ë—Ö–∞—Ä–≥–∞–≤–∞, –ê.",
                "publisher": "–ü–∏—Ç–µ—Ä, 2025",
                "pages": "304 —Å.",
            },
        ]

        for i, source in enumerate(sources, 1):
            st.write(
                f"{i}. {source['author']} {source['title']}. --- {source['publisher']}. --- {source['pages']}"
            )

        st.subheader("–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã")
        electronic_sources = [
            {
                "name": "Titanic Dataset - Machine Learning from Disaster",
                "platform": "Kaggle, 2024",
                "url": "https://www.kaggle.com/datasets/yasserh/titanic-dataset",
            },
            {
                "name": "–ü—Ä–æ—Ñ–∏–ª—å –Ω–∞ Habr",
                "platform": "Habr",
                "url": "https://habr.com/ru/users/DrArgentum",
            },
            {
                "name": "–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø—Ä–æ–µ–∫—Ç–∞",
                "platform": "GitHub",
                "url": "https://github.com/alexeev-prog/ML-DS_learning_article",
            },
        ]

        for source in electronic_sources:
            st.write(f"- **{source['name']}** [{source['platform']}]({source['url']})")

    def _render_technical_documentation(self):
        st.header("–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è")

        st.subheader("–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã")
        st.markdown(
            """
        #### –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
        - **core.services**: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ —Å–µ—Ä–≤–∏—Å—ã
        - **data.analysis**: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö
        - **data.preprocessing**: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        - **data.repositories**: –†–∞–±–æ—Ç–∞ —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
        - **entities.core**: –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ –∏ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

        #### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
        - **Python 3.8+**: –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
        - **Streamlit**: –§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        - **Pandas/NumPy**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö
        - **Plotly**: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
        - **Scikit-learn**: –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
        """
        )

        st.subheader("–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã")
        st.markdown(
            """
        #### DataTableComponent:
        - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–∞–±–ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–∏—Å–∫–æ–º –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
        - –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏ —ç–∫—Å–ø–æ—Ä—Ç –≤ CSV

        #### PlotComponent:
        - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ –¥–∏–∞–≥—Ä–∞–º–º
        - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

        #### ModelMetricsComponent:
        - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏
        - –ú–∞—Ç—Ä–∏—Ü–∞ –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç–µ–π –∏ –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

        #### PredictionFormComponent:
        - –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è
        - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞
        """
        )

        st.subheader("–°—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è")
        st.markdown(
            """
        - **–ì–ª–∞–≤–Ω–∞—è**: –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ —Å—Ç–µ–∫–∞
        - **–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö**: –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–∞
        - **–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –º–æ–¥–µ–ª–∏
        - **–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏**: –ê–Ω–∞–ª–∏–∑ –∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        - **–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è**: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
        - **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∞—è –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
        """
        )


class HomePage:
    def render(self, state) -> None:
        st.title("üö¢ –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –≤—ã–∂–∏–≤–∞–Ω–∏—è –Ω–∞ —Ç–∏—Ç–∞–Ω–∏–∫–µ")
        st.markdown("---")

        st.header("–ü—Ä–æ–µ–∫—Ç –ø–æ –∞–Ω–∞–ª–∏–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –º–∞—à–∏–Ω–Ω–æ–º—É –æ–±—É—á–µ–Ω–∏—é")

        col1, col2 = st.columns([2, 1])

        with col1:
            st.markdown(
                """
### –û –ø—Ä–æ–µ–∫—Ç–µ
–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –º–∏—Ä–µ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º —Ä–∞–∑–≤–∏—Ç–∏–µ–º AI-—Å—Ñ–µ—Ä—ã –º–∞–ª–æ –ª—é–¥–µ–π, –∑–Ω–∞–∫–æ–º—ã—Ö —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –±–∞–∑–æ–π –ø–æ –ò–ò-–ø—Ä–æ–¥—É–∫—Ç–∞–º. –ê —Ç–∞–∫–∂–µ –æ–±—â–µ—Å—Ç–≤–æ —Ä–∞–∑–¥–µ–ª–∏–ª–æ—Å—å –Ω–∞ –¥–≤–µ –∫—Ä–∞–π–Ω–æ—Å—Ç–∏, –ø–µ—Ä–≤—ã–µ –≥–ª–∞—Å—è—Ç —á—Ç–æ –ò–ò –∑–∞–º–µ–Ω–∏—Ç –≤—Å–µ—Ö –Ω–∞—Å, –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã —É–π–¥—É—Ç –Ω–∞ –∑–∞–≤–æ–¥, –∞ –≤—Ç–æ—Ä–∞—è –ø–æ–ª–æ–≤–∏–Ω–∞ –≥–æ–≤–æ—Ä–∏—Ç —á—Ç–æ –ò–ò —ç—Ç–æ –≤—Å–µ–º–∏—Ä–Ω—ã–π –ø—É–∑—ã—Ä—å –∏ –±–∏–∑–Ω–µ—Å. –ò —Ç–µ, –∏ —Ç–µ –ø—Ä–∞–≤—ã, –∏ –Ω–µ –ø—Ä–∞–≤—ã –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.
–í –∏—Å–∫—É—Å—Ç–≤–µ–Ω–Ω–æ–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–µ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –°–∞–º–∞—è –±–∞–Ω–∞–ª—å–Ω–∞—è ‚Äî –Ω–µ–π—Ä–æ–Ω–Ω–∞—è —Å–µ—Ç—å (—Å–∞–º–∞—è –ø—Ä–æ—Å—Ç–µ–π—à–∞—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä—Å–µ–ø—Ç—Ä–æ–Ω, –∫ –ø—Ä–∏–º–µ—Ä—É), –æ —Ç–æ–º –∫–∞–∫ –∏—Ö —Å–æ–∑–¥–∞–≤–∞—Ç—å –µ—Å—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –ù–æ –≤ —Å—Ñ–µ—Ä–µ —à–∫–æ–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –º–∞–ª–æ –∫—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç—å –æ –¥—Ä—É–≥–æ–π –≤–∞–∂–Ω–µ–π—à–µ–π —á–∞—Å—Ç–∏ ‚Äî Machine Learning, –º–∞—à–∏–Ω–Ω–æ–º –æ–±—É—á–µ–Ω–∏–∏.
–ò–º–µ–Ω–Ω–æ —ç—Ç–æ–π —á–∞—Å—Ç–∏ –∏ –ø–æ—Å–≤—è—â–µ–Ω –º–æ–π –ø—Ä–æ–µ–∫—Ç. –Ø –ø–ª–∞–Ω–∏—Ä—É—é —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–µ–π—à—É—é –º–æ–¥–µ–ª—å, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ —Å–º–µ—Ä—Ç–Ω–æ—Å—Ç–∏ –Ω–∞ ¬´–¢–∏—Ç–∞–Ω–∏–∫–µ¬ª –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å —à–∞–Ω—Å –≤—ã–∂–∏–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ –∫–ª–∞—Å—Å—É –±–∏–ª–µ—Ç–∞, —Ü–µ–Ω—ã –±–∏–ª–µ—Ç–∞, –ø–æ–ª—É, –∏ –≤–æ–∑—Ä–∞—Å—Ç—É. –≠—Ç–æ –∑–∞—Ç—Ä–æ–Ω–µ—Ç –∫–∞–∫ –∏ –∑–Ω–∞–Ω–∏—è –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –Ω–∞—É–∫–∏ –æ –¥–∞–Ω–Ω—ã—Ö (Data Science) —Ç–∞–∫ –∏ –∑–Ω–∞–Ω–∏—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ (–≤ –≤–∏–¥–µ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π –∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —Å–ø—É—Å–∫–∞).
–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ —è –±—É–¥—É —Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–º—É –ø–ª–∞–Ω—É:
1. –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∏–∑—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.
2. –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —Ä–∞–∑–≤–µ–¥–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –¥–ª—è –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–µ–π –∏ –∞–Ω–æ–º–∞–ª–∏–π.
3. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–ø—É—Å–∫–æ–≤, –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π.
4. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ ‚Äî —á–µ—Ä–µ–∑ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫—É—é —Ä–µ–≥—Ä–µ—Å—Å–∏—é —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–º —Å–ø—É—Å–∫–æ–º.
5. –û–±—É—á–µ–Ω–∏–µ –∏ –æ—Ü–µ–Ω–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏.
–ò–∑ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞:
–¶–µ–ª—å: –ò–∑—É—á–∏—Ç—å ML –∏ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Å–≤–æ—é –º–æ–¥–µ–ª—å.
–ü—Ä–æ–±–ª–µ–º–∞: –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –º–∏—Ä–µ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º —Ä–∞–∑–≤–∏—Ç–∏–µ–º AI-—Å—Ñ–µ—Ä—ã –º–∞–ª–æ –ª—é–¥–µ–π, –∑–Ω–∞–∫–æ–º—ã—Ö —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –±–∞–∑–æ–π –ø–æ –ò–ò-–ø—Ä–æ–¥—É–∫—Ç–∞–º.
–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å: –ê–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –∏—Å–∫—É—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è ML-–∏–Ω–∂–µ–Ω–µ—Ä–∞ ‚Äî –æ–¥–Ω–∞ –∏–∑ —Å–∞–º—ã—Ö –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã—Ö —Å—Ä–µ–¥–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ –¥–∞–Ω–Ω—ã—Ö.
–°—Ñ–æ–º–∏—Ä—É–µ–º –∑–∞–¥–∞—á–∏:
1. –ò–∑—É—á–∏—Ç—å –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ;
2. –ò–∑—É—á–∏—Ç—å –æ—Å–Ω–æ–≤—ã Data Science –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏;
3. –ò–∑—É—á–∏—Ç—å –ø—Ä–∏–∑–≤–æ–¥–Ω—É—é, –≥—Ä–∞–¥–∏–µ–Ω—Ç—Å–∫–∏–π —Å–ø—É—Å–∫ –∏ –ª–∏–Ω–µ–π–Ω—É—é —Ä–µ–≥—Ä–µ—Å—Å–∏—é;
4. –ò–∑—É—á–∏—Ç—å –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –º–æ–¥–µ–ª–∏;
5. –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä–∞–∑–≤–µ–¥–æ—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö;
6. –û–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å –∏ –æ—Ü–µ–Ω–∏—Ç—å –µ–µ;
7. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –º–æ–¥–µ–ª—å—é.
            """
            )

        with col2:
            st.image(
                "https://upload.wikimedia.org/wikipedia/commons/thumb/f/fd/RMS_Titanic_3.jpg/800px-RMS_Titanic_3.jpg",
                caption="–¢–∏—Ç–∞–Ω–∏–∫",
                width="stretch",
            )

        st.markdown("---")

        st.header("–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫")

        tech_cols = st.columns(4)

        with tech_cols[0]:
            st.subheader("üõ†Ô∏è –ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ")
            st.markdown(
                """
            - –ö–∞—Å—Ç–æ–º–Ω–∞—è –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è
            - –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Å–ø—É—Å–∫
            - NumPy/Pandas
            """
            )

        with tech_cols[1]:
            st.subheader("üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è")
            st.markdown(
                """
            - Matplotlib/Seaborn
            - Plotly
            - Streamlit
            """
            )

        with tech_cols[2]:
            st.subheader("üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞")
            st.markdown(
                """
            - –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
            - SOLID
            - –ü–∞—Ç—Ç–µ—Ä–Ω—ã –û–û–ü
            - ACID
            - DRY, KISS
            """
            )

        with tech_cols[3]:
            st.subheader("üìà –ê–Ω–∞–ª–∏—Ç–∏–∫–∞")
            st.markdown(
                """
            - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è EDA
            - –ú–µ—Ç—Ä–∏–∫–∏ –º–æ–¥–µ–ª–∏
            - –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑
            - –ê–Ω–∞–ª–∏–∑ —Ä–µ—à–µ–Ω–∏–π –º–æ–¥–µ–ª–∏
            """
            )

        st.markdown("---")

        st.header("–ö–∞–∫ –Ω–∞—á–∞—Ç—å")

        steps = st.columns(3)

        with steps[0]:
            st.subheader("1. –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö")
            st.markdown(
                "–ò–∑—É—á–µ–Ω–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–∞ –¢–∏—Ç–∞–Ω–∏–∫–∞ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–º–∏ –≤—ã–≤–æ–¥–∞–º–∏."
            )

        with steps[1]:
            st.subheader("2. –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏")
            st.markdown(
                "–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –∏ –æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –ø–æ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–≥—Ä–µ—Å—Å–∏–∏, –∞ —Ç–∞–∫–∂–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–æ–¥–µ–ª–∏."
            )

        with steps[2]:
            st.subheader("3. –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ")
            st.markdown(
                "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ –¥–ª–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —à–∞–Ω—Å–∞ –≤—ã–∂–∏–≤–∞–Ω–∏—è –¥–ª—è –ø–∞—Å—Å–∞–∂–∏—Ä–∞."
            )


class ModelExplanationPage:
    def render(self, state: AppState) -> None:
        st.title("üîç –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –∏ –∞–Ω–∞–ª–∏–∑")

        if state.get("trained_model") is None:
            st.warning("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞ –æ–±—É—á–∏—Ç–µ –º–æ–¥–µ–ª—å –ø–µ—Ä–µ–¥ –∞–Ω–∞–ª–∏–∑–æ–º.")
            return

        model = state["trained_model"]
        dataset = state["dataset"]

        tab1, tab2, tab3, tab4 = st.tabs(
            [
                "–í–∞–∂–Ω–æ—Å—Ç—å —Ñ–∏—á",
                "–ê–Ω–∞–ª–∏–∑ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è",
                "–ò–Ω—Å–∞–π—Ç—ã –º–æ–¥–µ–ª–∏",
                "–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞",
            ]
        )

        with tab1:
            self._render_feature_importance(state, model, dataset)

        with tab2:
            self._render_prediction_analysis(state)

        with tab3:
            self._render_model_insights(state, model, dataset)

        with tab4:
            self._render_advanced_analytics(state, model, dataset)

    def _render_feature_importance(
        self, state: AppState, model: TrainedModel, dataset: Dataset
    ):
        st.subheader("–í–∞–∂–Ω–æ—Å—Ç—å —Ñ–∏—á")

        importance_data = model.get_feature_importance()
        sorted_importance = dict(
            sorted(importance_data.items(), key=lambda x: x[1], reverse=True)
        )

        col1, col2 = st.columns([2, 1])

        with col1:
            fig = px.bar(
                x=list(sorted_importance.values())[:15],
                y=list(sorted_importance.keys())[:15],
                orientation="h",
                title="–¢–æ–ø 15 –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã—Ö —Ñ–∏—á",
                labels={"x": "–í–∞–∂–Ω–æ—Å—Ç—å (%)", "y": "–§–∏—á–∏"},
            )
            fig.update_layout(showlegend=False, height=500)
            st.plotly_chart(fig, width="stretch")

        with col2:
            st.subheader("–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ñ–∏—á")
            st.metric("–í—Å–µ–≥–æ —Ñ–∏—á", len(sorted_importance))

            top_5_importance = sum(list(sorted_importance.values())[:5])
            st.metric("–¢–æ–ø 5 —Ñ–∏—á –ø–æ –≤–∫–ª–∞–¥—É", f"{top_5_importance:.1f}%")

            st.write("**–¢–æ–ø 5 —Ñ–∏—á:**")
            for i, (feature, importance) in enumerate(
                list(sorted_importance.items())[:5]
            ):
                st.write(f"{i + 1}. {feature}: {importance:.2f}%")

    def _render_prediction_analysis(self, state: AppState):
        st.subheader("–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è")

        if not state.get("current_predictions"):
            st.info("–°–¥–µ–ª–∞–π—Ç–µ –∫–∞–∫–∏–µ –Ω–∏–±—É–¥—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º.")
            return

        latest_pred = state["current_predictions"][-1]
        model = state["trained_model"]
        preprocessor = state["preprocessing_pipeline"]

        prediction_service = ServiceFactory.create_prediction_service(
            model, preprocessor
        )
        explanation_service = ServiceFactory.create_explanation_service(
            prediction_service
        )

        explanation = explanation_service.explain_prediction(latest_pred.passenger)

        col1, col2 = st.columns(2)

        with col1:
            st.subheader("–î–µ—Ç–∞–ª–∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è")
            st.metric("–®–∞–Ω—Å –≤—ã–∂–∏–≤–∞–Ω–∏—è", f"{explanation.probability:.1%}")
            st.metric(
                "–§–∏–Ω–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ",
                "–í—ã–∂–∏–ª" if explanation.prediction else "–ù–µ –≤—ã–∂–∏–ª",
            )
            st.metric("–£—Ä–æ–≤–µ–Ω—å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏", explanation.confidence_level)

            passenger = latest_pred.passenger
            st.write("**–§–∏—á–∏ –ø–∞—Å—Å–∞–∂–∏—Ä–∞:**")
            feature_data = {
                "–ö–ª–∞—Å—Å": passenger.pclass,
                "–ü–æ–ª": passenger.sex,
                "–í–æ–∑—Ä–∞—Å—Ç": passenger.age,
                "–ë—Ä–∞—Ç—å—è –∏ —Å–µ—Å—Ç—Ä—ã": passenger.sibsp,
                "–†–æ–¥–∏—Ç–µ–ª–∏/–¥–µ—Ç–∏": passenger.parch,
                "–°—É–º–º–∞": f"${passenger.fare:.2f}",
                "–ü–æ–≥—Ä—É–∂–µ–Ω–Ω—ã–π –ø–æ—Ä—Ç": passenger.embarked,
            }

            for key, value in feature_data.items():
                st.write(f"- **{key}:** {value}")

        with col2:
            st.subheader("–§–∞–∫—Ç–æ—Ä—ã, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è")
            for factor in explanation.decision_factors:
                st.write(f"‚Ä¢ {factor}")

            st.subheader("–¢–æ–ø —Ñ–∞–∫—Ç–æ—Ä–æ–≤, –≤–ª–∏—è—é—â–∏—Ö –Ω–∞ –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–µ")
            impact_df = pd.DataFrame(
                [
                    {
                        "feature": impact.feature_name,
                        "impact": impact.impact_score,
                        "contribution": f"{impact.contribution:.1%}",
                    }
                    for impact in explanation.feature_impacts[:10]
                ]
            )

            fig = px.bar(
                impact_df,
                x="impact",
                y="feature",
                orientation="h",
                title="–¢–æ–ø 10 —Ñ–∏—á –≤–ª–∏—è—é—â–∏–µ –Ω–∞ —ç—Ç–æ —Ä–µ—à–µ–Ω–∏–µ",
                color=impact_df["impact"] > 0,
                color_discrete_map={True: "green", False: "red"},
            )
            fig.update_layout(showlegend=False)
            st.plotly_chart(fig, width="stretch")

    def _render_model_insights(
        self, state: AppState, model: TrainedModel, dataset: Dataset
    ):
        st.subheader("–ò–Ω—Å–∞–π—Ç—ã –º–æ–¥–µ–ª–∏")

        if state.get("training_result"):
            training_result = state["training_result"]

            col1, col2 = st.columns(2)

            with col1:
                st.write("**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è:**")
                st.write(f"- –§–∏–Ω–∞–ª—å–Ω—ã–µ –ø–æ—Ç–µ—Ä–∏: {training_result.final_loss:.6f}")
                st.write(f"- –í—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è: {training_result.training_time:.2f}s")
                st.write(f"- –û—Ü–µ–Ω–∫–∞ –æ–±—É—á–µ–Ω–∏—è: {training_result.config.learning_rate}")
                st.write(f"- –≠–ø–æ—Ö–∏: {training_result.config.epochs}")

            with col2:
                st.write("**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–¥–µ–ª–∏:**")
                st.write(f"- –†–µ–≥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è: {training_result.config.lambda_reg}")
                st.write(f"- Convergence Tol: {training_result.config.convergence_tol}")
                st.write("- –û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä: Adam")

        st.subheader("–ê–Ω–∞–ª–∏–∑ –≥—Ä–∞–Ω–∏—Ü —Ä–µ—à–µ–Ω–∏–π")

        feature1 = st.selectbox(
            "–ü–µ—Ä–≤–∞—è —Ñ–∏—á–∞", options=dataset.feature_names[:10], index=0, key="feature1"
        )
        feature2 = st.selectbox(
            "–í—Ç–æ—Ä–∞—è —Ñ–∏—á–∞",
            options=dataset.feature_names[:10],
            index=1,
            key="feature2",
        )

        if st.button("–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å 2D –≥—Ä–∞—Ñ–∏–∫"):
            self._generate_2d_analysis(feature1, feature2, model, dataset)

    def _generate_2d_analysis(
        self, feature1: str, feature2: str, model: TrainedModel, dataset: Dataset
    ):
        try:
            fig = px.scatter(
                dataset.features.assign(Survived=dataset.target),
                x=feature1,
                y=feature2,
                color="Survived",
                title=f"Decision Pattern: {feature1} vs {feature2}",
                color_discrete_map={0: "red", 1: "green"},
            )
            st.plotly_chart(fig, width="stretch")
        except Exception as e:
            st.error(f"Could not generate 2D analysis: {e}")

    def _render_advanced_analytics(
        self, state: AppState, model: TrainedModel, dataset: Dataset
    ):
        st.subheader("–ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –º–æ–¥–µ–ª–∏")

        preprocessor = state["preprocessing_pipeline"]
        prediction_service = ServiceFactory.create_prediction_service(
            model, preprocessor
        )
        explanation_service = ServiceFactory.create_explanation_service(
            prediction_service
        )

        if st.button("–ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –º–æ–¥–µ–ª–∏"):
            with st.spinner("–ó–∞–ø—É—Å–∫ –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏..."):
                model_stats = explanation_service.get_model_statistics(model)

                col1, col2, col3 = st.columns(3)

                with col1:
                    st.metric("–°–ª–æ–∂–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏", model_stats["total_features"])
                    st.metric(
                        "–í–µ–ª–∏—á–∏–Ω–∞ –≤–µ—Å–æ–≤", f"{model_stats['weight_magnitude']:.4f}"
                    )

                with col2:
                    st.metric("–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Å–∞", model_stats["positive_weights"])
                    st.metric("–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –≤–µ—Å–∞", model_stats["negative_weights"])

                with col3:
                    weight_range = f"{model_stats['weight_range']['min']:.3f} to {model_stats['weight_range']['max']:.3f}"
                    st.metric("–î–∏–∞–ø–∞–∑–æ–Ω –≤–µ—Å–æ–≤", weight_range)
                    st.metric("–°–º–µ—â–µ–Ω–∏–µ", f"{model_stats['bias']:.4f}")

                st.subheader("–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Å–æ–≤")
                fig = px.histogram(
                    x=model.weights, nbins=50, title="Distribution of Model Weights"
                )
                st.plotly_chart(fig, width="stretch")


class DataAnalysisPage:
    def render(self, state: AppState) -> None:
        st.title("üìä –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö")
        st.markdown("---")

        app_config = state.get("app_config", {})

        if state.get("dataset") is None:
            self._render_data_loading(state, app_config)
        else:
            self._render_data_analysis(state)

    def _render_data_loading(self, state: AppState, app_config: dict) -> None:
        st.header("–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞—Ç–∞—Å–µ—Ç")

        col1, col2 = st.columns(2)

        with col1:
            st.subheader("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–µ–º–æ –¥–∞–Ω–Ω—ã–µ")

            data_path = app_config.get("ml_pipeline", {}).get(
                "data_path", "datasets/TitanicDataset.csv"
            )

            st.write(f"–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—É—Ç—å –∫ –¥–∞–Ω–Ω—ã–º: `{data_path}`")

            if st.button("–ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞—Ç–∞—Å–µ—Ç –¢–∏—Ç–∞–Ω–∏–∫–∞", type="primary"):
                with st.spinner("–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞..."):
                    try:
                        repo = CSVDataRepository(data_path, target_column="Survived")
                        state["dataset"] = repo.load_data()

                        dataset = state["dataset"]
                        if dataset.target is not None:
                            dataset.target = dataset.target.astype(np.float64)

                        st.success("–î–∞—Ç–∞—Å–µ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!")
                        st.rerun()
                    except Exception as e:
                        st.error(f"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞ –∏–∑ {data_path}: {e}")
                        fallback_path = "datasets/TitanicDataset.csv"
                        if data_path != fallback_path:
                            st.info(f"–ü—Ä–æ–±—É–µ–º –∑–∞–ø–∞—Å–Ω–æ–π –¥–∞—Ç–∞—Å–µ—Ç: {fallback_path}")
                            try:
                                repo = CSVDataRepository(
                                    fallback_path, target_column="Survived"
                                )
                                state["dataset"] = repo.load_data()
                                st.success("–ó–∞–ø–∞—Å–Ω–æ–π –¥–∞—Ç–∞—Å–µ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!")
                                st.rerun()
                            except Exception as fallback_e:
                                st.error(f"–ó–∞–ø–∞—Å–Ω–æ–π —Ç–∞–∫–∂–µ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª: {fallback_e}")

        with col2:
            st.subheader("–ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ")
            uploaded_file = st.file_uploader("–í—ã–±–µ—Ä–∏—Ç–µ CSV —Ñ–∞–π–ª", type="csv")
            if uploaded_file is not None:
                try:
                    df = pd.read_csv(uploaded_file)
                    st.success(
                        f"–ó–∞–≥—Ä—É–∂–µ–Ω–æ {len(df)} —Å—Ç—Ä–æ–∫ —Å {len(df.columns)} –∫–æ–ª–æ–Ω–∫–∞–º–∏"
                    )

                    target_col = st.selectbox("–í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ–ª–µ–≤—É—é –∫–æ–ª–æ–Ω–∫—É", df.columns)

                    if st.button("–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"):
                        state["dataset"] = Dataset(
                            features=df.drop(columns=[target_col]),
                            target=df[target_col],
                            feature_names=list(df.drop(columns=[target_col]).columns),
                            target_name=target_col,
                        )
                        st.rerun()

                except Exception as e:
                    st.error(f"–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞: {e}")

    def _create_interactive_plots(self, dataset: Dataset):
        st.subheader("–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—ã–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏")

        x_axis = st.selectbox("–û—Å—å X", ["Age", "Fare", "Pclass"])
        y_axis = st.selectbox("–û—Å—å Y", ["Fare", "Age", "SibSp"])
        color_by = st.selectbox("–¶–≤–µ—Ç –ø–æ", ["Survived", "Pclass", "Sex"])

        fig = px.scatter(
            dataset.features.assign(Survived=dataset.target),
            x=x_axis,
            y=y_axis,
            color=color_by,
            hover_data=["Name"],
            title=f"{y_axis} vs {x_axis} –ø–æ {color_by}",
        )
        st.plotly_chart(fig)

    def _render_data_analysis(self, state: AppState) -> None:
        dataset = state["dataset"]

        st.header("–û–±–∑–æ—Ä –¥–∞—Ç–∞—Å–µ—Ç–∞")

        table_component = DataTableComponent()
        table_component.render(dataset.features, "–î–∞—Ç–∞—Å–µ—Ç –¢–∏—Ç–∞–Ω–∏–∫–∞")

        st.header("–°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∞—è —Å–≤–æ–¥–∫–∞")

        col1, col2 = st.columns(2)

        with col1:
            st.subheader("–ß–∏—Å–ª–æ–≤—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏")
            st.dataframe(dataset.features.describe(), width="stretch")

        with col2:
            st.subheader("–ö–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏")
            categorical_stats = {}
            for col in dataset.features.select_dtypes(include=["object"]).columns:
                categorical_stats[col] = dataset.features[col].value_counts().head()
            st.json(categorical_stats)

        st.header("–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö")

        self._create_interactive_plots(dataset=dataset)

        try:
            visualizer = EDAVisualizer()

            survival_plots = visualizer.create_survival_analysis_plots(dataset)
            demographic_plots = visualizer.create_demographic_plots(dataset)
            correlation_plots = visualizer.create_correlation_analysis(dataset)

            plot_component = PlotComponent()

            st.subheader("–ê–Ω–∞–ª–∏–∑ –≤—ã–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏")
            cols = st.columns(2)
            for i, (name, path) in enumerate(survival_plots.items()):
                with cols[i % 2]:
                    plot_component.render(path, name.replace("_", " ").title())

            st.subheader("–î–µ–º–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑")
            cols = st.columns(2)
            for i, (name, path) in enumerate(demographic_plots.items()):
                with cols[i % 2]:
                    plot_component.render(path, name.replace("_", " ").title())

            st.subheader("–ö–æ—Ä—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑")
            for name, path in correlation_plots.items():
                plot_component.render(path, name.replace("_", " ").title())

        except Exception as e:
            st.error(f"–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤: {e}")


class ModelTrainingPage:
    def render(self, state: AppState) -> None:
        st.title("ü§ñ –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏")
        st.markdown("---")

        if state.get("dataset") is None:
            st.warning(
                "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞ —Å–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞—Ç–∞—Å–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö."
            )
            return

        st.header("–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±—É—á–µ–Ω–∏—è")

        training_config = self._render_training_controls()

        if st.button("–û–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å", type="primary"):
            self._train_model(state, training_config)

        if state.get("trained_model") is not None:
            self._render_training_results(state)

    def _render_training_controls(self) -> dict[str, Any]:
        col1, col2, col3 = st.columns(3)

        with col1:
            learning_rate = st.slider("–°–∫–æ—Ä–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è", 0.001, 0.5, 0.05, 0.001)
            epochs = st.number_input("–≠–ø–æ—Ö–∏", 1000, 100000, 3000, 100)

        with col2:
            test_size = st.slider("–†–∞–∑–º–µ—Ä —Ç–µ—Å—Ç–∞", 0.1, 0.5, 0.2, 0.05)
            random_state = st.number_input("–°–ª—É—á–∞–π–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ", 0, 100, 42)

        with col3:
            convergence_tol = st.number_input(
                "–î–æ–ø—É—Å–∫ —Å—Ö–æ–¥–∏–º–æ—Å—Ç–∏",
                1e-8,
                1e-4,
                1e-4,
                1e-8,
            )
            batch_size = st.selectbox("–†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞", ["–ø–æ–ª–Ω—ã–π", 32, 64, 128], index=0)

        return {
            "learning_rate": learning_rate,
            "epochs": epochs,
            "test_size": test_size,
            "random_state": random_state,
            "convergence_tol": convergence_tol,
            "batch_size": batch_size,
        }

    def _train_model(self, state: AppState, config: dict[str, Any]) -> None:
        try:
            with st.spinner("–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏..."):
                if state.get("preprocessing_pipeline") is None:
                    state["preprocessing_pipeline"] = (
                        PreprocessorFactory.create_titanic_preprocessor()
                    )

                preprocessor = state["preprocessing_pipeline"]
                training_service = ServiceFactory.create_training_service(preprocessor)

                training_config = TrainingConfig(
                    learning_rate=config["learning_rate"],
                    epochs=config["epochs"],
                    test_size=config["test_size"],
                    random_state=config["random_state"],
                    convergence_tol=config["convergence_tol"],
                )

                training_result = training_service.train_model(
                    state["dataset"], training_config
                )
                state["trained_model"] = training_result.model
                state["training_history"] = training_result.learning_curve
                state["training_result"] = training_result

                state["preprocessing_artifacts"] = (
                    training_result.model.preprocessing_artifacts
                )

                if hasattr(training_service, "poly_transformer"):
                    state["trained_model"].preprocessing_artifacts = {
                        "poly_transformer": training_service.poly_transformer,
                        "X_mean": getattr(training_service, "X_mean", None),
                        "X_std": getattr(training_service, "X_std", None),
                    }

                st.success("–ú–æ–¥–µ–ª—å —É—Å–ø–µ—à–Ω–æ –æ–±—É—á–µ–Ω–∞!")
                st.rerun()

        except Exception as e:
            st.error(f"–û—à–∏–±–∫–∞ –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏: {e}")

    def _render_training_results(self, state: AppState) -> None:
        st.header("–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—É—á–µ–Ω–∏—è")

        model = state["trained_model"]
        training_result = state.get("training_result")

        col1, col2 = st.columns(2)

        with col1:
            st.subheader("–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏")
            st.metric("–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∏—á", len(model.feature_names))
            st.metric("–§–∏–Ω–∞–ª—å–Ω—ã–µ –ø–æ—Ç–µ—Ä–∏", f"{state['training_history'][-1]:.6f}")

            if training_result:
                st.metric("–í—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è", f"{training_result.training_time:.2f}s")
            else:
                st.metric("–í—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è", "–ù/–î")

        with col2:
            st.subheader("–í–∞–∂–Ω–æ—Å—Ç—å —Ñ–∏—á")
            importance_data = {
                "–§–∏—á–∞": model.feature_names,
                "–í–∞–∂–Ω–æ—Å—Ç—å": np.abs(model.weights),
            }
            importance_df = pd.DataFrame(importance_data).sort_values(
                "–í–∞–∂–Ω–æ—Å—Ç—å", ascending=False
            )
            st.dataframe(importance_df.head(55), width="stretch")

        st.subheader("–ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—É—á–µ–Ω–∏—è")

        fig = go.Figure()
        fig.add_trace(
            go.Scatter(
                x=list(range(len(state["training_history"]))),
                y=state["training_history"],
                mode="lines",
                name="–ü–æ—Ç–µ—Ä–∏ –æ–±—É—á–µ–Ω–∏—è",
                line={"color": "blue", "width": 2},
            )
        )

        fig.update_layout(
            title="–ü–æ—Ç–µ—Ä–∏ –æ–±—É—á–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º–µ–Ω–∏",
            xaxis_title="–≠–ø–æ—Ö–∞",
            yaxis_title="–ü–æ—Ç–µ—Ä–∏",
            showlegend=True,
            template="plotly_white",
        )

        st.plotly_chart(fig, width="stretch")

        if st.button("–û—Ü–µ–Ω–∏—Ç—å –º–æ–¥–µ–ª—å", type="secondary"):
            self._evaluate_model(state)

    def _evaluate_model(self, state: AppState) -> None:
        try:
            with st.spinner("–û—Ü–µ–Ω–∫–∞ –º–æ–¥–µ–ª–∏..."):
                preprocessor = state["preprocessing_pipeline"]
                training_service = ServiceFactory.create_training_service(preprocessor)

                evaluation_result = training_service.evaluate_model(
                    state["trained_model"], state["dataset"]
                )

                metrics_component = ModelMetricsComponent()
                metrics_component.render(
                    evaluation_result.classification_report,
                    evaluation_result.confusion_matrix,
                )

        except Exception as e:
            st.error(f"–û—à–∏–±–∫–∞ –æ—Ü–µ–Ω–∫–∏ –º–æ–¥–µ–ª–∏: {e}")


class PredictionPage:
    def render(self, state: AppState) -> None:
        st.title("üîÆ –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –≤—ã–∂–∏–≤–∞–Ω–∏—è")
        st.markdown("---")

        if state.get("trained_model") is None:
            st.warning("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞ —Å–Ω–∞—á–∞–ª–∞ –æ–±—É—á–∏—Ç–µ –º–æ–¥–µ–ª—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏.")
            return

        with st.expander("–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –º–æ–¥–µ–ª–∏"):
            model = state["trained_model"]
            st.write(f"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∏—á –≤ –º–æ–¥–µ–ª–∏: {len(model.feature_names)}")
            st.write(f"–ù–∞–∑–≤–∞–Ω–∏—è —Ñ–∏—á: {model.feature_names}")
            st.write(f"–§–æ—Ä–º–∞ –≤–µ—Å–æ–≤ –º–æ–¥–µ–ª–∏: {model.weights.shape}")
            st.write(f"–°–º–µ—â–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏: {model.bias}")

        st.header("–°–¥–µ–ª–∞—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ")

        form_component = PredictionFormComponent()
        passenger = form_component.render()

        if passenger is not None:
            self._make_prediction(state, passenger)

        if state.get("current_predictions"):
            self._render_prediction_history(state)

    def _make_prediction(self, state: AppState, passenger: Passenger) -> None:
        try:
            with st.spinner("–í—ã—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è..."):
                preprocessor = state["preprocessing_pipeline"]
                prediction_service = ServiceFactory.create_prediction_service(
                    state["trained_model"], preprocessor
                )

                prediction_result = prediction_service.predict_survival(passenger)

                if "current_predictions" not in state:
                    state["current_predictions"] = []

                state["current_predictions"].append(prediction_result)

                with st.expander("–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è"):
                    st.write(f"–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å: {prediction_result.probability:.4f}")
                    st.write(f"–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ: {prediction_result.prediction}")
                    st.write(f"–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: {prediction_result.confidence:.4f}")
                    st.write(f"–§–∏—á–∏ –ø–∞—Å—Å–∞–∂–∏—Ä–∞: {passenger}")

                self._render_prediction_result(prediction_result)

        except Exception as e:
            st.error(f"–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è: {e}")
            st.error(f"–î–µ—Ç–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞: {e!s}")

    def _render_prediction_result(self, prediction: Any) -> None:
        st.header("–†–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è")

        col1, col2 = st.columns(2)

        with col1:
            probability = prediction.probability
            survived = prediction.prediction

            st.metric(
                "–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –≤—ã–∂–∏–≤–∞–Ω–∏—è",
                f"{probability:.1%}",
                delta="–í—ã–∂–∏–ª" if survived else "–ù–µ –≤—ã–∂–∏–ª",
                delta_color="normal" if survived else "inverse",
            )

            gauge_fig = go.Figure(
                go.Indicator(
                    mode="gauge+number+delta",
                    value=probability * 100,
                    domain={"x": [0, 1], "y": [0, 1]},
                    title={"text": "–®–∞–Ω—Å –≤—ã–∂–∏–≤–∞–Ω–∏—è"},
                    delta={"reference": 50},
                    gauge={
                        "axis": {"range": [0, 100]},
                        "bar": {"color": "darkblue"},
                        "steps": [
                            {"range": [0, 30], "color": "lightcoral"},
                            {"range": [30, 70], "color": "lightyellow"},
                            {"range": [70, 100], "color": "lightgreen"},
                        ],
                        "threshold": {
                            "line": {"color": "red", "width": 4},
                            "thickness": 0.75,
                            "value": 50,
                        },
                    },
                )
            )

            st.plotly_chart(gauge_fig, width="stretch")

        with col2:
            st.subheader("–î–µ—Ç–∞–ª–∏ –ø–∞—Å—Å–∞–∂–∏—Ä–∞")
            passenger_info = {
                "–ö–ª–∞—Å—Å": prediction.passenger.pclass,
                "–ü–æ–ª": prediction.passenger.sex,
                "–í–æ–∑—Ä–∞—Å—Ç": prediction.passenger.age,
                "–ë—Ä–∞—Ç—å—è/–°—É–ø—Ä—É–≥–∏": prediction.passenger.sibsp,
                "–†–æ–¥–∏—Ç–µ–ª–∏/–î–µ—Ç–∏": prediction.passenger.parch,
                "–ü–ª–∞—Ç–∞": f"${prediction.passenger.fare:.2f}",
                "–ü–æ—Ä—Ç –ø–æ—Å–∞–¥–∫–∏": prediction.passenger.embarked,
            }

            for key, value in passenger_info.items():
                st.write(f"**{key}:** {value}")

    def _render_prediction_history(self, state: AppState) -> None:
        st.header("–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π")

        history_data = []
        for pred in state["current_predictions"][-10:]:
            history_data.append(
                {
                    "–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å": f"{pred.probability:.1%}",
                    "–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ": "–í—ã–∂–∏–ª" if pred.prediction else "–ù–µ –≤—ã–∂–∏–ª",
                    "–í–æ–∑—Ä–∞—Å—Ç": pred.passenger.age,
                    "–ö–ª–∞—Å—Å": pred.passenger.pclass,
                    "–ü–æ–ª": pred.passenger.sex,
                    "–í—Ä–µ–º—è": pred.timestamp.strftime("%H:%M:%S"),
                }
            )

        if history_data:
            st.dataframe(pd.DataFrame(history_data), width="stretch")


class TitanicApp:
    def __init__(self, app_config: dict | None = None):
        self.pages = {
            "–ì–ª–∞–≤–Ω–∞—è": HomePage(),
            "–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö": DataAnalysisPage(),
            "–û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏": ModelTrainingPage(),
            "–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏": ModelExplanationPage(),
            "–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è": PredictionPage(),
            "–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è": DocumentationPage(),
        }
        self.app_config = app_config or {}

    def run(self) -> None:
        st.set_page_config(
            page_title="Titanic Survival Predictor",
            page_icon="üö¢",
            layout="wide",
            initial_sidebar_state="expanded",
        )

        if "app_state" not in st.session_state:
            st.session_state.app_state = {
                "current_page": "–ì–ª–∞–≤–Ω–∞—è",
                "dataset": None,
                "trained_model": None,
                "preprocessing_pipeline": None,
                "current_predictions": [],
                "training_history": [],
                "app_config": self.app_config,
            }

        self._render_sidebar()
        self._render_current_page()

    def _render_sidebar(self) -> None:
        with st.sidebar:
            st.title("üö¢ Titanic ML")
            st.markdown("---")

            selected_page = st.radio(
                "–ù–∞–≤–∏–≥–∞—Ü–∏—è",
                list(self.pages.keys()),
                index=list(self.pages.keys()).index(
                    st.session_state.app_state["current_page"]
                ),
            )

            st.session_state.app_state["current_page"] = selected_page

            st.markdown("---")

            st.subheader("–°—Ç–∞—Ç—É—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è")

            app_config = st.session_state.app_state.get("app_config", {})
            data_path = app_config.get("ml_pipeline", {}).get(
                "data_path", "datasets/TitanicDataset.csv"
            )

            dataset_status = (
                "‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω"
                if st.session_state.app_state.get("dataset")
                else "‚ùå –ù–µ –∑–∞–≥—Ä—É–∂–µ–Ω"
            )
            model_status = (
                "‚úÖ –û–±—É—á–µ–Ω–∞"
                if st.session_state.app_state.get("trained_model")
                else "‚ùå –ù–µ –æ–±—É—á–µ–Ω–∞"
            )

            st.write(f"–î–∞—Ç–∞—Å–µ—Ç: {dataset_status}")
            st.write(f"–ú–æ–¥–µ–ª—å: {model_status}")
            st.write(f"–ü—É—Ç—å –∫ –¥–∞–Ω–Ω—ã–º: {data_path}")

            if st.session_state.app_state.get("dataset"):
                dataset = st.session_state.app_state["dataset"]
                st.write(f"–°—Ç—Ä–æ–∫–∏: {len(dataset.features)}")
                st.write(f"–§–∏—á–∏: {len(dataset.feature_names)}")

            st.markdown("---")

            if st.button("–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ", type="secondary"):
                st.session_state.app_state = {
                    "current_page": "–ì–ª–∞–≤–Ω–∞—è",
                    "dataset": None,
                    "trained_model": None,
                    "preprocessing_pipeline": None,
                    "current_predictions": [],
                    "training_history": [],
                    "training_result": None,
                    "app_config": self.app_config,
                }
                st.rerun()

    def _render_current_page(self) -> None:
        current_page = st.session_state.app_state["current_page"]
        page_instance = self.pages[current_page]
        page_instance.render(st.session_state.app_state)


if __name__ == "__main__":
    app = TitanicApp()
    app.run()
